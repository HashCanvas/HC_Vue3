{
  "version": 3,
  "sources": ["dep:js-errorlog-collection", "../../js-errorlog-collection/index.js"],
  "sourcesContent": ["import d from \"./node_modules/js-errorlog-collection/index.js\";export default d;\nexport * from \"./node_modules/js-errorlog-collection/index.js\"", "export const jsErrorCollection = ({ runtimeError = true, rejectError = true, consoleError = false }, callback) => {\r\n  if (runtimeError) {\r\n    //JS\u8FD0\u884C\u65F6\u9519\u8BEF\u548C\u8D44\u6E90\u52A0\u8F7D\u9519\u8BEF\r\n    window.addEventListener(\r\n      'error',\r\n      ({ error, target }) => {\r\n        if (target.outerHTML) {\r\n          //img error collection\r\n          const errLog = `${JSON.stringify(target.outerHTML)}`\r\n          callback(errLog)\r\n        } else {\r\n          const errLog = `${error?.stack?.substr(0, 300)}`\r\n          callback(errLog)\r\n        }\r\n      },\r\n      //use Event capture  to collection  img error\r\n      true\r\n    )\r\n  }\r\n  if (rejectError) {\r\n    //promise\u88ABreject\u5E76\u4E14\u9519\u8BEF\u4FE1\u606F\u6CA1\u6709\u88AB\u5904\u7406\u7684\u65F6\u5019\uFF0C\u4F1A\u629B\u51FA\u4E00\u4E2Aunhandledrejection\r\n    //\u63A5\u53E3\u9519\u8BEF\u5904\u7406\uFF0Ccross origin , 404,401\r\n    window.addEventListener('unhandledrejection', ({ reason }) => {\r\n      let errLog = ''\r\n      if (typeof reason === 'string') {\r\n        errLog = reason\r\n      } else {\r\n        errLog = `${reason?.stack?.substr(0, 300)}`\r\n      }\r\n      //\u672A\u6388\u6743\u548C\u53D6\u6D88\u4E0D\u6355\u6349\r\n      //\u6B64\u5904\u53EF\u6DFB\u52A0\u4E0D\u6355\u6349\u72B6\u6001\u7801\r\n      const unhandledCode = '403, 401'\r\n      //\u6B64\u5904\u53EF\u6DFB\u52A0\u4E0D\u6355\u6349string\r\n      const unhandledString = 'cancel'\r\n      if (!unhandledCode.includes(reason?.code) && !reason.includes(unhandledString)) {\r\n        callback(errLog)\r\n      }\r\n    })\r\n  }\r\n  if (consoleError) {\r\n    //\u4E9B\u7279\u6B8A\u60C5\u51B5\u4E0B\uFF0C\u8FD8\u9700\u8981\u6355\u83B7\u5904\u7406console.error\uFF0C\u6355\u83B7\u65B9\u5F0F\u5C31\u662F\u91CD\u5199window.console.error\r\n    const _oldConsoleError = window.console.error\r\n    window.console.error = function () {\r\n      // eslint-disable-next-line prefer-rest-params\r\n      const errLog = Object.values(arguments).join(',')\r\n      if (errLog.indexOf('custom') === -1) {\r\n        callback(errLog)\r\n      }\r\n      // @ts-ignore\r\n      // eslint-disable-next-line prefer-rest-params\r\n      _oldConsoleError && _oldConsoleError.apply(window, arguments)\r\n    }\r\n  }\r\n}\r\n\r\nexport default {}\r\n"],
  "mappings": ";;;;;AAAA;;;ACAA;AAAO,IAAM,oBAAoB,CAAC,EAAE,eAAe,MAAM,cAAc,MAAM,eAAe,SAAS,aAAa;AAChH,MAAI,cAAc;AAEhB,WAAO,iBACL,SACA,CAAC,EAAE,OAAO,aAAa;AAL7B;AAMQ,UAAI,OAAO,WAAW;AAEpB,cAAM,SAAS,GAAG,KAAK,UAAU,OAAO,SAAS;AACjD,iBAAS,MAAM;AAAA,MACjB,OAAO;AACL,cAAM,SAAS,GAAG,qCAAO,UAAP,mBAAc,OAAO,GAAG;AAC1C,iBAAS,MAAM;AAAA,MACjB;AAAA,IACF,GAEA,IACF;AAAA,EACF;AACA,MAAI,aAAa;AAGf,WAAO,iBAAiB,sBAAsB,CAAC,EAAE,aAAa;AAtBlE;AAuBM,UAAI,SAAS;AACb,UAAI,OAAO,WAAW,UAAU;AAC9B,iBAAS;AAAA,MACX,OAAO;AACL,iBAAS,GAAG,uCAAQ,UAAR,mBAAe,OAAO,GAAG;AAAA,MACvC;AAGA,YAAM,gBAAgB;AAEtB,YAAM,kBAAkB;AACxB,UAAI,CAAC,cAAc,SAAS,iCAAQ,IAAI,KAAK,CAAC,OAAO,SAAS,eAAe,GAAG;AAC9E,iBAAS,MAAM;AAAA,MACjB;AAAA,IACF,CAAC;AAAA,EACH;AACA,MAAI,cAAc;AAEhB,UAAM,mBAAmB,OAAO,QAAQ;AACxC,WAAO,QAAQ,QAAQ,WAAY;AAEjC,YAAM,SAAS,OAAO,OAAO,SAAS,EAAE,KAAK,GAAG;AAChD,UAAI,OAAO,QAAQ,QAAQ,MAAM,IAAI;AACnC,iBAAS,MAAM;AAAA,MACjB;AAGA,0BAAoB,iBAAiB,MAAM,QAAQ,SAAS;AAAA,IAC9D;AAAA,EACF;AACF;AAEA,IAAO,iCAAQ,CAAC;;;ADvD+C,IAAO,kCAAQ;",
  "names": []
}
